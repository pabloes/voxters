/*! "src/game.ts" 6bbf565692b4bf47848300bfea50ce2d3b73fb1a191abb2c15e41c772dcb5c69 */ eval("var __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\ndefine(\"common/voxter/eyes\", [\"require\", \"exports\"], function (require, exports) {\r\n    \"use strict\";\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.createEyes = void 0;\r\n    var colors = [\r\n        \"#ff0000\",\r\n        \"#ff00ff\",\r\n        \"#ffff00\",\r\n        \"#ffffff\",\r\n        \"#00ff00\",\r\n        \"#00ffff\",\r\n        \"#0000ff\",\r\n    ];\r\n    var emissiveByColor = [\r\n        8,\r\n        6,\r\n        4,\r\n        4,\r\n        4,\r\n        4,\r\n        10\r\n    ];\r\n    var createEyes = function (boxter, variationIndex, color, texture) {\r\n        var eyes = new Entity();\r\n        eyes.setParent(boxter);\r\n        var mat = new Material();\r\n        var eyeShape = new PlaneShape();\r\n        eyeShape.withCollisions = false;\r\n        eyeShape.uvs = getUvs(variationIndex + 1);\r\n        eyes.addComponent(eyeShape);\r\n        eyes.addComponent(new Transform({\r\n            position: new Vector3(0, 1 / 3 - 0.025, -0.5001),\r\n            scale: new Vector3(1 - 0.05, 1 / 3, 1)\r\n        }));\r\n        // mat.albedoColor= Color3.FromHexString(color);\r\n        mat.emissiveColor = Color3.FromHexString(color);\r\n        mat.emissiveIntensity = emissiveByColor[colors.indexOf(color)];\r\n        mat.albedoTexture = texture;\r\n        mat.alphaTexture = texture;\r\n        eyes.addComponent(mat);\r\n        return {\r\n            applyIndex: applyIndex,\r\n            applyColor: function (color) {\r\n                //  mat.albedoColor= Color3.FromHexString(color);\r\n                mat.emissiveColor = Color3.FromHexString(color);\r\n                mat.emissiveIntensity = emissiveByColor[colors.indexOf(color)];\r\n            }\r\n        };\r\n        function applyIndex(variationIndex) {\r\n            eyeShape.uvs = getUvs(variationIndex + 1);\r\n        }\r\n        function getUvs(variationIndex) {\r\n            var spriteCols = 8; // number of columns\r\n            var spriteRows = 8; // number of rows\r\n            var currentSpriteCell = variationIndex; // starting position\r\n            // Calculated variables\r\n            var h2Fac = 178 / 256;\r\n            var h1Fac = 32 / 256;\r\n            var spriteCels = spriteCols * spriteRows;\r\n            var colFactor = 1 / spriteCols;\r\n            var rowFactor = 1 / spriteRows;\r\n            var currRowStart = spriteRows - Math.floor((currentSpriteCell - 1) / spriteCols) - h1Fac;\r\n            var currColStart = ((currentSpriteCell - 1) % spriteCols);\r\n            var A = (currColStart) * (colFactor);\r\n            var B = (currColStart + 1) * (colFactor);\r\n            var C = (currRowStart - 1) * (rowFactor) + h2Fac * rowFactor;\r\n            var D = (currRowStart) * (rowFactor);\r\n            return [\r\n                0, 0, 0, 0, 0, 0, 0, 0,\r\n                B,\r\n                C,\r\n                A,\r\n                C,\r\n                A,\r\n                D,\r\n                B,\r\n                D, //d\r\n            ];\r\n        }\r\n    };\r\n    exports.createEyes = createEyes;\r\n});\r\ndefine(\"common/voxter/mouth\", [\"require\", \"exports\"], function (require, exports) {\r\n    \"use strict\";\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.createMouth = void 0;\r\n    var createMouth = function (boxter, variationIndex, color, texture) {\r\n        var eyes = new Entity();\r\n        eyes.setParent(boxter);\r\n        var mat = new Material();\r\n        var eyeShape = new PlaneShape();\r\n        eyeShape.withCollisions = false;\r\n        eyeShape.uvs = getUvs(variationIndex + 1);\r\n        eyes.addComponent(eyeShape);\r\n        var EYE_HEIGHT = 78 / 256;\r\n        var MOUTH_HEIGHT = 114 / 256;\r\n        var EYEBROWN_HEIGHT = 32 / 256;\r\n        var NECK_HEIGHT = 32 / 256;\r\n        eyes.addComponent(new Transform({\r\n            position: new Vector3(0, -((1 / 3) / 2), -0.5001),\r\n            scale: new Vector3(1 - 0.05, 2 / 3 - 0.05, 1)\r\n        }));\r\n        // mat.albedoColor = Color3.Yellow();\r\n        mat.specularIntensity = 0;\r\n        mat.roughness = 1;\r\n        mat.albedoTexture = texture;\r\n        mat.alphaTexture = texture;\r\n        mat.emissiveTexture = texture;\r\n        mat.emissiveIntensity = 1.2;\r\n        mat.emissiveColor = new Color3(1, 1, 1);\r\n        eyes.addComponent(mat);\r\n        return {\r\n            applyIndex: function (variationIndex) {\r\n                eyeShape.uvs = getUvs(variationIndex + 1);\r\n            }\r\n        };\r\n        function getUvs(variationIndex) {\r\n            var spriteCols = 8; // number of columns\r\n            var spriteRows = 8; // number of rows\r\n            var currentSpriteCell = variationIndex; // starting position\r\n            // Calculated variables\r\n            var h2Fac = 63 / 128;\r\n            var h1Fac = 55 / 128;\r\n            var spriteCels = spriteCols * spriteRows;\r\n            var colFactor = 1 / spriteCols;\r\n            var rowFactor = 1 / spriteRows;\r\n            var currRowStart = spriteRows - Math.floor((currentSpriteCell - 1) / spriteCols) - h1Fac;\r\n            var currColStart = ((currentSpriteCell - 1) % spriteCols);\r\n            var A = (currColStart) * (colFactor);\r\n            var B = (currColStart + 1) * (colFactor);\r\n            var C = (currRowStart - 1) * (rowFactor) + h2Fac * rowFactor;\r\n            var D = (currRowStart) * (rowFactor);\r\n            return [\r\n                0, 0, 0, 0, 0, 0, 0, 0,\r\n                B,\r\n                C,\r\n                A,\r\n                C,\r\n                A,\r\n                D,\r\n                B,\r\n                D, //d\r\n            ];\r\n        }\r\n    };\r\n    exports.createMouth = createMouth;\r\n});\r\ndefine(\"common/voxter/head\", [\"require\", \"exports\"], function (require, exports) {\r\n    \"use strict\";\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.createHead = void 0;\r\n    var createHead = function (boxter, index) {\r\n        var shape = index && new GLTFShape(\"models/accesories/acc\" + index + \".glb\");\r\n        var head = new Entity();\r\n        head.addComponent(new Transform({ position: new Vector3(0, 0, 0) }));\r\n        if (index)\r\n            head.addComponent(shape);\r\n        head.setParent(boxter);\r\n        return {\r\n            applyIndex: function (index) {\r\n                console.log(\"head ondex\", index);\r\n                var shape = new GLTFShape(\"models/accesories/acc\" + index + \".glb\");\r\n                head.addComponentOrReplace(shape);\r\n            }\r\n        };\r\n    };\r\n    exports.createHead = createHead;\r\n});\r\ndefine(\"common/lib/decoder\", [\"require\", \"exports\"], function (require, exports) {\r\n    \"use strict\";\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.getEncoder = exports.encode = exports.getDna = exports.maximumNumber = exports.decode = exports.COLOR = exports.properties = exports.propertySizes = void 0;\r\n    exports.propertySizes = [64, 64, 7, 9];\r\n    exports.properties = [\r\n        \"eye\", \"mouth\", \"eye_color\", \"head\"\r\n    ];\r\n    var COLOR;\r\n    (function (COLOR) {\r\n        COLOR[COLOR[\"RED\"] = 0] = \"RED\";\r\n        COLOR[COLOR[\"PINK\"] = 1] = \"PINK\";\r\n        COLOR[COLOR[\"YELLOW\"] = 2] = \"YELLOW\";\r\n        COLOR[COLOR[\"WHITE\"] = 3] = \"WHITE\";\r\n        COLOR[COLOR[\"GREEN\"] = 4] = \"GREEN\";\r\n        COLOR[COLOR[\"TURQUOISE\"] = 5] = \"TURQUOISE\";\r\n        COLOR[COLOR[\"BLUE\"] = 6] = \"BLUE\";\r\n    })(COLOR = exports.COLOR || (exports.COLOR = {}));\r\n    ;\r\n    function decode(dna, propertySizes) {\r\n        var results = [];\r\n        var i = 0;\r\n        var factor = 1;\r\n        while (i < propertySizes.length) {\r\n            results.push(Math.floor(dna / factor) % propertySizes[i]);\r\n            factor = factor * propertySizes[i];\r\n            i++;\r\n        }\r\n        return results;\r\n    }\r\n    exports.decode = decode;\r\n    function maximumNumber(propertySizes) {\r\n        var i = 0;\r\n        var factor = 1;\r\n        while (i < propertySizes.length) {\r\n            factor *= propertySizes[i];\r\n            i++;\r\n        }\r\n        return factor - 1;\r\n    }\r\n    exports.maximumNumber = maximumNumber;\r\n    function getDna(_a) {\r\n        var eyeIndex = _a.eyeIndex, mouthIndex = _a.mouthIndex, eyeColorIndex = _a.eyeColorIndex, headIndex = _a.headIndex;\r\n        return encode(exports.propertySizes, [eyeIndex, mouthIndex, eyeColorIndex, headIndex]);\r\n    }\r\n    exports.getDna = getDna;\r\n    function encode(propertySizes, propertyValues) {\r\n        var i = 0;\r\n        var dna = 0;\r\n        var factor = 1;\r\n        while (i < propertySizes.length) {\r\n            dna = dna + (propertyValues[i] * factor);\r\n            factor *= propertySizes[i];\r\n            i++;\r\n        }\r\n        return dna;\r\n    }\r\n    exports.encode = encode;\r\n    function getEncoder(properties, propertySizes) {\r\n        return function (dna) {\r\n            var decoded = decode(dna, propertySizes);\r\n            return properties.reduce(function (acc, current, index) {\r\n                acc[current] = decoded[index];\r\n                return acc;\r\n            }, {});\r\n        };\r\n    }\r\n    exports.getEncoder = getEncoder;\r\n});\r\n//TODO add metadata\r\ndefine(\"common/voxter/voxter\", [\"require\", \"exports\", \"common/voxter/eyes\", \"common/voxter/mouth\", \"common/voxter/head\", \"common/lib/decoder\"], function (require, exports, eyes_1, mouth_1, head_1, decoder_1) {\r\n    \"use strict\";\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    exports.createVoxter = void 0;\r\n    var colors = [\r\n        \"#ff0000\",\r\n        \"#ff00ff\",\r\n        \"#ffff00\",\r\n        \"#ffffff\",\r\n        \"#00ff00\",\r\n        \"#00ffff\",\r\n        \"#0000ff\",\r\n    ];\r\n    var texture = new Texture(\"images/sprites2048.png\", { samplingMode: 1, hasAlpha: true });\r\n    var createVoxter = function (_a) {\r\n        var position = _a.position, dna = _a.dna, rotation = _a.rotation;\r\n        var _b = __read(decoder_1.decode(dna, decoder_1.propertySizes), 4), eyeIndex = _b[0], mouthIndex = _b[1], eyeColorIndex = _b[2], headIndex = _b[3];\r\n        var eyeColor = colors[eyeColorIndex];\r\n        var entity = new Entity();\r\n        var skin = new Material();\r\n        skin.albedoColor = new Color3(0, 0, 0);\r\n        var boxterShape = new BoxShape();\r\n        entity.addComponent(boxterShape);\r\n        entity.addComponent(skin);\r\n        var boxterTransform = new Transform({\r\n            position: position,\r\n            scale: new Vector3(1, 1, 1),\r\n            rotation: rotation || Quaternion.Zero()\r\n        });\r\n        entity.addComponent(boxterTransform);\r\n        var eyes = eyes_1.createEyes(entity, eyeIndex, eyeColor, texture);\r\n        var mouth = mouth_1.createMouth(entity, mouthIndex, \"#ff00ff\", texture);\r\n        var head = head_1.createHead(entity, headIndex);\r\n        return {\r\n            applyDna: function (dna) {\r\n                var _a = __read(decoder_1.decode(dna, decoder_1.propertySizes), 4), eyeIndex = _a[0], mouthIndex = _a[1], colorIndex = _a[2], headIndex = _a[3];\r\n                eyes.applyIndex(eyeIndex);\r\n                eyes.applyColor(colors[colorIndex]);\r\n                mouth.applyIndex(mouthIndex);\r\n                head.applyIndex(headIndex);\r\n            },\r\n            getEntity: function () { return entity; },\r\n            setParent: function (parent) { return entity.setParent(parent); }\r\n        };\r\n    };\r\n    exports.createVoxter = createVoxter;\r\n});\r\ndefine(\"SDK-simple/src/game\", [\"require\", \"exports\", \"common/voxter/voxter\"], function (require, exports, voxter_1) {\r\n    \"use strict\";\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var root = new Entity();\r\n    engine.addEntity(root);\r\n    var voxter = voxter_1.createVoxter({\r\n        position: new Vector3(8, 1, 8),\r\n        rotation: Quaternion.Zero(),\r\n        dna: 0\r\n    });\r\n    voxter.applyDna(1);\r\n    voxter.setParent(root);\r\n});\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL2NvbW1vbi92b3h0ZXIvZXllcy50cyIsIi4uLy4uL2NvbW1vbi92b3h0ZXIvbW91dGgudHMiLCIuLi8uLi9jb21tb24vdm94dGVyL2hlYWQudHMiLCIuLi8uLi9jb21tb24vbGliL2RlY29kZXIudHMiLCIuLi8uLi9jb21tb24vdm94dGVyL3ZveHRlci50cyIsIi4uL3NyYy9nYW1lLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBQ0EsSUFBTSxNQUFNLEdBQUc7UUFDYixTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO0tBQ1YsQ0FBQztJQUNGLElBQU0sZUFBZSxHQUFHO1FBQ3RCLENBQUM7UUFDRCxDQUFDO1FBQ0QsQ0FBQztRQUNELENBQUM7UUFDRCxDQUFDO1FBQ0QsQ0FBQztRQUNELEVBQUU7S0FDSCxDQUFDO0lBRUssSUFBTSxVQUFVLEdBQUcsVUFBQyxNQUFNLEVBQUUsY0FBYyxFQUFFLEtBQUssRUFBRSxPQUFPO1FBQzdELElBQU0sSUFBSSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7UUFDMUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN2QixJQUFNLEdBQUcsR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO1FBQzNCLElBQU0sUUFBUSxHQUFHLElBQUksVUFBVSxFQUFFLENBQUM7UUFDbEMsUUFBUSxDQUFDLGNBQWMsR0FBRyxLQUFLLENBQUM7UUFDaEMsUUFBUSxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsY0FBYyxHQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hDLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLFNBQVMsQ0FBQztZQUM5QixRQUFRLEVBQUMsSUFBSSxPQUFPLENBQUMsQ0FBQyxFQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsS0FBSyxFQUFDLENBQUMsTUFBTSxDQUFDO1lBQ3pDLEtBQUssRUFBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLEdBQUMsSUFBSSxFQUFDLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQ2pDLENBQUMsQ0FBQyxDQUFDO1FBQ0wsZ0RBQWdEO1FBQy9DLEdBQUcsQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNoRCxHQUFHLENBQUMsaUJBQWlCLEdBQUcsZUFBZSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUMvRCxHQUFHLENBQUMsYUFBYSxHQUFHLE9BQU8sQ0FBQztRQUM1QixHQUFHLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQztRQUMzQixJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZCLE9BQU87WUFDTCxVQUFVLFlBQUE7WUFDVixVQUFVLEVBQUMsVUFBQyxLQUFLO2dCQUNqQixpREFBaUQ7Z0JBQy9DLEdBQUcsQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDaEQsR0FBRyxDQUFDLGlCQUFpQixHQUFHLGVBQWUsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDakUsQ0FBQztTQUNGLENBQUM7UUFFRixTQUFTLFVBQVUsQ0FBQyxjQUFjO1lBQ2hDLFFBQVEsQ0FBQyxHQUFHLEdBQUUsTUFBTSxDQUFDLGNBQWMsR0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QyxDQUFDO1FBQ0QsU0FBUyxNQUFNLENBQUMsY0FBYztZQUM1QixJQUFJLFVBQVUsR0FBRyxDQUFDLENBQUEsQ0FBRyxvQkFBb0I7WUFDekMsSUFBSSxVQUFVLEdBQUcsQ0FBQyxDQUFBLENBQUcsaUJBQWlCO1lBQ3RDLElBQUksaUJBQWlCLEdBQUcsY0FBYyxDQUFDLENBQUcsb0JBQW9CO1lBRTlELHVCQUF1QjtZQUN2QixJQUFJLEtBQUssR0FBRyxHQUFHLEdBQUMsR0FBRyxDQUFDO1lBQ3BCLElBQUksS0FBSyxHQUFHLEVBQUUsR0FBQyxHQUFHLENBQUM7WUFDbkIsSUFBSSxVQUFVLEdBQUcsVUFBVSxHQUFHLFVBQVUsQ0FBQztZQUN6QyxJQUFJLFNBQVMsR0FBRyxDQUFDLEdBQUMsVUFBVSxDQUFDO1lBQzdCLElBQUksU0FBUyxHQUFHLENBQUMsR0FBQyxVQUFVLENBQUM7WUFDN0IsSUFBSSxZQUFZLEdBQUcsVUFBVSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxpQkFBaUIsR0FBQyxDQUFDLENBQUMsR0FBQyxVQUFVLENBQUMsR0FBRyxLQUFLLENBQUM7WUFDckYsSUFBSSxZQUFZLEdBQUcsQ0FBQyxDQUFDLGlCQUFpQixHQUFDLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDO1lBRXhELElBQU0sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUN2QyxJQUFNLENBQUMsR0FBRyxDQUFDLFlBQVksR0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3pDLElBQU0sQ0FBQyxHQUFHLENBQUMsWUFBWSxHQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEdBQUcsS0FBSyxHQUFDLFNBQVMsQ0FBQztZQUMzRCxJQUFNLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUU7WUFFeEMsT0FBTztnQkFDTCxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQztnQkFFZixDQUFDO2dCQUNELENBQUM7Z0JBQ0QsQ0FBQztnQkFDRCxDQUFDO2dCQUVELENBQUM7Z0JBQ0QsQ0FBQztnQkFDRCxDQUFDO2dCQUNELENBQUMsRUFBRSxHQUFHO2FBQ1AsQ0FBQztRQUNKLENBQUM7SUFDTCxDQUFDLENBQUE7SUEvRFksUUFBQSxVQUFVLGNBK0R0Qjs7Ozs7O0lDbkZNLElBQU0sV0FBVyxHQUFHLFVBQUMsTUFBTSxFQUFFLGNBQWMsRUFBRSxLQUFLLEVBQUUsT0FBTztRQUU5RCxJQUFNLElBQUksR0FBRyxJQUFJLE1BQU0sRUFBRSxDQUFDO1FBQzFCLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkIsSUFBTSxHQUFHLEdBQUcsSUFBSSxRQUFRLEVBQUUsQ0FBQztRQUMzQixJQUFNLFFBQVEsR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO1FBQ2xDLFFBQVEsQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1FBRWhDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDLGNBQWMsR0FBQyxDQUFDLENBQUMsQ0FBQztRQUV4QyxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzVCLElBQU0sVUFBVSxHQUFHLEVBQUUsR0FBQyxHQUFHLENBQUM7UUFDMUIsSUFBTSxZQUFZLEdBQUcsR0FBRyxHQUFDLEdBQUcsQ0FBQztRQUM3QixJQUFNLGVBQWUsR0FBRyxFQUFFLEdBQUMsR0FBRyxDQUFDO1FBQy9CLElBQU0sV0FBVyxHQUFHLEVBQUUsR0FBQyxHQUFHLENBQUM7UUFFM0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLFNBQVMsQ0FBQztZQUM5QixRQUFRLEVBQUMsSUFBSSxPQUFPLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLE1BQU0sQ0FBQztZQUMxQyxLQUFLLEVBQUMsSUFBSSxPQUFPLENBQUMsQ0FBQyxHQUFDLElBQUksRUFBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLElBQUksRUFBRSxDQUFDLENBQUM7U0FDdEMsQ0FBQyxDQUFDLENBQUM7UUFDTCxxQ0FBcUM7UUFDcEMsR0FBRyxDQUFDLGlCQUFpQixHQUFHLENBQUMsQ0FBQztRQUMxQixHQUFHLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQztRQUNsQixHQUFHLENBQUMsYUFBYSxHQUFHLE9BQU8sQ0FBQztRQUM1QixHQUFHLENBQUMsWUFBWSxHQUFHLE9BQU8sQ0FBQztRQUMzQixHQUFHLENBQUMsZUFBZSxHQUFHLE9BQU8sQ0FBQztRQUM5QixHQUFHLENBQUMsaUJBQWlCLEdBQUcsR0FBRyxDQUFDO1FBQzVCLEdBQUcsQ0FBQyxhQUFhLEdBQUcsSUFBSSxNQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztRQUV0QyxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZCLE9BQU87WUFDTCxVQUFVLEVBQUMsVUFBQyxjQUFjO2dCQUN4QixRQUFRLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQyxjQUFjLEdBQUMsQ0FBQyxDQUFDLENBQUE7WUFDekMsQ0FBQztTQUNGLENBQUE7UUFDRCxTQUFTLE1BQU0sQ0FBQyxjQUFjO1lBQzVCLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQSxDQUFHLG9CQUFvQjtZQUN6QyxJQUFJLFVBQVUsR0FBRyxDQUFDLENBQUEsQ0FBRyxpQkFBaUI7WUFDdEMsSUFBSSxpQkFBaUIsR0FBRyxjQUFjLENBQUMsQ0FBRyxvQkFBb0I7WUFFOUQsdUJBQXVCO1lBQ3ZCLElBQUksS0FBSyxHQUFHLEVBQUUsR0FBQyxHQUFHLENBQUM7WUFDbkIsSUFBSSxLQUFLLEdBQUcsRUFBRSxHQUFDLEdBQUcsQ0FBQztZQUNuQixJQUFJLFVBQVUsR0FBRyxVQUFVLEdBQUcsVUFBVSxDQUFDO1lBQ3pDLElBQUksU0FBUyxHQUFHLENBQUMsR0FBQyxVQUFVLENBQUM7WUFDN0IsSUFBSSxTQUFTLEdBQUcsQ0FBQyxHQUFDLFVBQVUsQ0FBQztZQUM3QixJQUFJLFlBQVksR0FBRyxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLGlCQUFpQixHQUFDLENBQUMsQ0FBQyxHQUFDLFVBQVUsQ0FBQyxHQUFHLEtBQUssQ0FBQztZQUNyRixJQUFJLFlBQVksR0FBRyxDQUFDLENBQUMsaUJBQWlCLEdBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxDQUFDLENBQUM7WUFFeEQsSUFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3ZDLElBQU0sQ0FBQyxHQUFHLENBQUMsWUFBWSxHQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDekMsSUFBTSxDQUFDLEdBQUcsQ0FBQyxZQUFZLEdBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsR0FBRyxLQUFLLEdBQUMsU0FBUyxDQUFDO1lBQzNELElBQU0sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBRTtZQUV4QyxPQUFPO2dCQUNMLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO2dCQUVmLENBQUM7Z0JBQ0QsQ0FBQztnQkFDRCxDQUFDO2dCQUNELENBQUM7Z0JBRUQsQ0FBQztnQkFDRCxDQUFDO2dCQUNELENBQUM7Z0JBQ0QsQ0FBQyxFQUFFLEdBQUc7YUFDUCxDQUFDO1FBQ0osQ0FBQztJQUNMLENBQUMsQ0FBQTtJQXBFWSxRQUFBLFdBQVcsZUFvRXZCOzs7Ozs7SUNuRU0sSUFBTSxVQUFVLEdBQUcsVUFBQyxNQUFNLEVBQUUsS0FBSztRQUVwQyxJQUFNLEtBQUssR0FBRyxLQUFLLElBQUksSUFBSSxTQUFTLENBQUMsMEJBQXdCLEtBQUssU0FBTSxDQUFDLENBQUM7UUFDMUUsSUFBTSxJQUFJLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztRQUMxQixJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksU0FBUyxDQUFDLEVBQUMsUUFBUSxFQUFDLElBQUksT0FBTyxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDLENBQUE7UUFDL0QsSUFBRyxLQUFLO1lBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRXZCLE9BQU87WUFDSCxVQUFVLEVBQUMsVUFBQyxLQUFLO2dCQUNiLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLEtBQUssQ0FBQyxDQUFDO2dCQUNqQyxJQUFNLEtBQUssR0FBRyxJQUFJLFNBQVMsQ0FBQywwQkFBd0IsS0FBSyxTQUFNLENBQUMsQ0FBQztnQkFDakUsSUFBSSxDQUFDLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3RDLENBQUM7U0FDSixDQUFBO0lBQ0wsQ0FBQyxDQUFBO0lBZlksUUFBQSxVQUFVLGNBZXRCOzs7Ozs7SUNoQlksUUFBQSxhQUFhLEdBQUcsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMvQixRQUFBLFVBQVUsR0FBSTtRQUN2QixLQUFLLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNO0tBQ3RDLENBQUM7SUFHRixJQUFZLEtBUVg7SUFSRCxXQUFZLEtBQUs7UUFDYiwrQkFBRyxDQUFBO1FBQ0gsaUNBQUksQ0FBQTtRQUNKLHFDQUFNLENBQUE7UUFDTixtQ0FBSyxDQUFBO1FBQ0wsbUNBQUssQ0FBQTtRQUNMLDJDQUFTLENBQUE7UUFDVCxpQ0FBSSxDQUFBO0lBQ1IsQ0FBQyxFQVJXLEtBQUssR0FBTCxhQUFLLEtBQUwsYUFBSyxRQVFoQjtJQUFBLENBQUM7SUFFRixTQUFnQixNQUFNLENBQUMsR0FBRyxFQUFFLGFBQWE7UUFDckMsSUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFDO1FBRW5CLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNWLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQztRQUNmLE9BQU0sQ0FBQyxHQUFHLGFBQWEsQ0FBQyxNQUFNLEVBQUM7WUFDM0IsT0FBTyxDQUFDLElBQUksQ0FBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBQyxNQUFNLENBQUMsR0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUUsQ0FBQztZQUN4RCxNQUFNLEdBQUcsTUFBTSxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUVuQyxDQUFDLEVBQUUsQ0FBQztTQUNQO1FBRUQsT0FBTyxPQUFPLENBQUM7SUFDbkIsQ0FBQztJQWJELHdCQWFDO0lBRUQsU0FBZ0IsYUFBYSxDQUFDLGFBQWE7UUFDdkMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1YsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsT0FBTSxDQUFDLEdBQUcsYUFBYSxDQUFDLE1BQU0sRUFBQztZQUMzQixNQUFNLElBQUksYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNCLENBQUMsRUFBRSxDQUFBO1NBQ047UUFDRCxPQUFPLE1BQU0sR0FBQyxDQUFDLENBQUM7SUFDcEIsQ0FBQztJQVJELHNDQVFDO0lBRUQsU0FBZ0IsTUFBTSxDQUFDLEVBQWdEO1lBQS9DLFFBQVEsY0FBQSxFQUFFLFVBQVUsZ0JBQUEsRUFBRSxhQUFhLG1CQUFBLEVBQUUsU0FBUyxlQUFBO1FBQ2xFLE9BQU8sTUFBTSxDQUFDLHFCQUFhLEVBQUUsQ0FBQyxRQUFRLEVBQUUsVUFBVSxFQUFFLGFBQWEsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFBO0lBQ2xGLENBQUM7SUFGRCx3QkFFQztJQUVELFNBQWdCLE1BQU0sQ0FBQyxhQUFhLEVBQUUsY0FBYztRQUNoRCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVixJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDWixJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDZixPQUFNLENBQUMsR0FBRyxhQUFhLENBQUMsTUFBTSxFQUFDO1lBQzNCLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBRSxjQUFjLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFFLENBQUM7WUFDM0MsTUFBTSxJQUFJLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUUzQixDQUFDLEVBQUUsQ0FBQztTQUNQO1FBQ0QsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDO0lBWEQsd0JBV0M7SUFFRCxTQUFnQixVQUFVLENBQUMsVUFBVSxFQUFFLGFBQWE7UUFDaEQsT0FBTyxVQUFTLEdBQUc7WUFDZixJQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsR0FBRyxFQUFFLGFBQWEsQ0FBQyxDQUFDO1lBQzNDLE9BQU8sVUFBVSxDQUFDLE1BQU0sQ0FBQyxVQUFDLEdBQUcsRUFBRSxPQUFPLEVBQUUsS0FBSztnQkFDekMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztnQkFDOUIsT0FBTyxHQUFHLENBQUM7WUFDZixDQUFDLEVBQUMsRUFBRSxDQUFDLENBQUM7UUFDVixDQUFDLENBQUE7SUFDTCxDQUFDO0lBUkQsZ0NBUUM7O0FBRUQsbUJBQW1COzs7OztJQy9EbkIsSUFBTSxNQUFNLEdBQUc7UUFDWCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO1FBQ1QsU0FBUztRQUNULFNBQVM7UUFDVCxTQUFTO0tBQ1YsQ0FBQztJQUVKLElBQU0sT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLHdCQUF3QixFQUFFLEVBQUMsWUFBWSxFQUFDLENBQUMsRUFBRSxRQUFRLEVBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQztJQU9oRixJQUFNLFlBQVksR0FBRyxVQUFDLEVBQStDO1lBQTlDLFFBQVEsY0FBQSxFQUFFLEdBQUcsU0FBQSxFQUFFLFFBQVEsY0FBQTtRQUMzQyxJQUFBLEtBQUEsT0FBbUQsZ0JBQU0sQ0FBQyxHQUFHLEVBQUUsdUJBQWEsQ0FBQyxJQUFBLEVBQTVFLFFBQVEsUUFBQSxFQUFFLFVBQVUsUUFBQSxFQUFFLGFBQWEsUUFBQSxFQUFFLFNBQVMsUUFBOEIsQ0FBQztRQUNwRixJQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDdkMsSUFBTSxNQUFNLEdBQUcsSUFBSSxNQUFNLEVBQUUsQ0FBQztRQUM1QixJQUFNLElBQUksR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO1FBQzVCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxNQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztRQUNyQyxJQUFNLFdBQVcsR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO1FBQ25DLE1BQU0sQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDakMsTUFBTSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUUxQixJQUFNLGVBQWUsR0FBRyxJQUFJLFNBQVMsQ0FBQztZQUNwQyxRQUFRLFVBQUE7WUFDUixLQUFLLEVBQUMsSUFBSSxPQUFPLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7WUFDeEIsUUFBUSxFQUFDLFFBQVEsSUFBRSxVQUFVLENBQUMsSUFBSSxFQUFFO1NBQ3JDLENBQUMsQ0FBQztRQUNILE1BQU0sQ0FBQyxZQUFZLENBQUMsZUFBZSxDQUFDLENBQUM7UUFFckMsSUFBTSxJQUFJLEdBQUcsaUJBQVUsQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUM3RCxJQUFNLEtBQUssR0FBRyxtQkFBVyxDQUFDLE1BQU0sRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ2xFLElBQU0sSUFBSSxHQUFHLGlCQUFVLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBRTNDLE9BQU87WUFDTCxRQUFRLEVBQUMsVUFBQyxHQUFVO2dCQUNaLElBQUEsS0FBQSxPQUFnRCxnQkFBTSxDQUFDLEdBQUcsRUFBRSx1QkFBYSxDQUFDLElBQUEsRUFBekUsUUFBUSxRQUFBLEVBQUUsVUFBVSxRQUFBLEVBQUUsVUFBVSxRQUFBLEVBQUUsU0FBUyxRQUE4QixDQUFDO2dCQUVqRixJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUMxQixJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO2dCQUNwQyxLQUFLLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUM3QixJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzdCLENBQUM7WUFDRCxTQUFTLEVBQUMsY0FBSSxPQUFBLE1BQU0sRUFBTixDQUFNO1lBQ3BCLFNBQVMsRUFBQyxVQUFDLE1BQWEsSUFBRyxPQUFBLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQXhCLENBQXdCO1NBQ3BELENBQUM7SUFDSixDQUFDLENBQUM7SUFqQ1MsUUFBQSxZQUFZLGdCQWlDckI7Ozs7O0lDckRKLElBQU0sSUFBSSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7SUFDMUIsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUV2QixJQUFNLE1BQU0sR0FBRyxxQkFBWSxDQUFDO1FBQzFCLFFBQVEsRUFBQyxJQUFJLE9BQU8sQ0FBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztRQUMzQixRQUFRLEVBQUMsVUFBVSxDQUFDLElBQUksRUFBRTtRQUMxQixHQUFHLEVBQUMsQ0FBQztLQUNOLENBQUMsQ0FBQztJQUNILE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbkIsTUFBTSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENPTE9SIH0gZnJvbSBcIi4uLy4uL2xpYi9kZWNvZGVyXCI7XG5jb25zdCBjb2xvcnMgPSBbXG4gIGAjZmYwMDAwYCxcbiAgYCNmZjAwZmZgLCBcbiAgYCNmZmZmMDBgLFxuICBgI2ZmZmZmZmAsXG4gIGAjMDBmZjAwYCxcbiAgYCMwMGZmZmZgLFxuICBgIzAwMDBmZmAsICBcbl07XG5jb25zdCBlbWlzc2l2ZUJ5Q29sb3IgPSBbXG4gIDgsXG4gIDYsXG4gIDQsXG4gIDQsXG4gIDQsXG4gIDQsXG4gIDEwXG5dO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRXllcyA9IChib3h0ZXIsIHZhcmlhdGlvbkluZGV4LCBjb2xvciwgdGV4dHVyZSkgPT4ge1xuICAgIGNvbnN0IGV5ZXMgPSBuZXcgRW50aXR5KCk7XG4gICAgZXllcy5zZXRQYXJlbnQoYm94dGVyKTtcbiAgICBjb25zdCBtYXQgPSBuZXcgTWF0ZXJpYWwoKTtcbiAgICBjb25zdCBleWVTaGFwZSA9IG5ldyBQbGFuZVNoYXBlKCk7XG4gICAgZXllU2hhcGUud2l0aENvbGxpc2lvbnMgPSBmYWxzZTtcbiAgICBleWVTaGFwZS51dnMgPSBnZXRVdnModmFyaWF0aW9uSW5kZXgrMSk7XG4gICAgZXllcy5hZGRDb21wb25lbnQoZXllU2hhcGUpOyAgICBcbiAgICBleWVzLmFkZENvbXBvbmVudChuZXcgVHJhbnNmb3JtKHtcbiAgICAgIHBvc2l0aW9uOm5ldyBWZWN0b3IzKDAsMS8zLTAuMDI1LC0wLjUwMDEpLCBcbiAgICAgIHNjYWxlOm5ldyBWZWN0b3IzKDEtMC4wNSwxLzMsIDEpXG4gICAgfSkpO1xuICAgLy8gbWF0LmFsYmVkb0NvbG9yPSBDb2xvcjMuRnJvbUhleFN0cmluZyhjb2xvcik7XG4gICAgbWF0LmVtaXNzaXZlQ29sb3IgPSBDb2xvcjMuRnJvbUhleFN0cmluZyhjb2xvcik7XG4gICAgbWF0LmVtaXNzaXZlSW50ZW5zaXR5ID0gZW1pc3NpdmVCeUNvbG9yW2NvbG9ycy5pbmRleE9mKGNvbG9yKV07XG4gICAgbWF0LmFsYmVkb1RleHR1cmUgPSB0ZXh0dXJlO1xuICAgIG1hdC5hbHBoYVRleHR1cmUgPSB0ZXh0dXJlOyBcbiAgICBleWVzLmFkZENvbXBvbmVudChtYXQpO1xuICAgIHJldHVybiB7XG4gICAgICBhcHBseUluZGV4LFxuICAgICAgYXBwbHlDb2xvcjooY29sb3IpPT57XG4gICAgICAvLyAgbWF0LmFsYmVkb0NvbG9yPSBDb2xvcjMuRnJvbUhleFN0cmluZyhjb2xvcik7XG4gICAgICAgIG1hdC5lbWlzc2l2ZUNvbG9yID0gQ29sb3IzLkZyb21IZXhTdHJpbmcoY29sb3IpOyBcbiAgICAgICAgbWF0LmVtaXNzaXZlSW50ZW5zaXR5ID0gZW1pc3NpdmVCeUNvbG9yW2NvbG9ycy5pbmRleE9mKGNvbG9yKV07XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGFwcGx5SW5kZXgodmFyaWF0aW9uSW5kZXgpe1xuICAgICAgZXllU2hhcGUudXZzID1nZXRVdnModmFyaWF0aW9uSW5kZXgrMSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFV2cyh2YXJpYXRpb25JbmRleCl7XG4gICAgICBsZXQgc3ByaXRlQ29scyA9IDggICAvLyBudW1iZXIgb2YgY29sdW1uc1xuICAgICAgbGV0IHNwcml0ZVJvd3MgPSA4ICAgLy8gbnVtYmVyIG9mIHJvd3NcbiAgICAgIGxldCBjdXJyZW50U3ByaXRlQ2VsbCA9IHZhcmlhdGlvbkluZGV4OyAgIC8vIHN0YXJ0aW5nIHBvc2l0aW9uXG4gIFxuICAgICAgLy8gQ2FsY3VsYXRlZCB2YXJpYWJsZXNcbiAgICAgIGxldCBoMkZhYyA9IDE3OC8yNTY7XG4gICAgICBsZXQgaDFGYWMgPSAzMi8yNTY7XG4gICAgICBsZXQgc3ByaXRlQ2VscyA9IHNwcml0ZUNvbHMgKiBzcHJpdGVSb3dzO1xuICAgICAgbGV0IGNvbEZhY3RvciA9IDEvc3ByaXRlQ29scztcbiAgICAgIGxldCByb3dGYWN0b3IgPSAxL3Nwcml0ZVJvd3M7XG4gICAgICBsZXQgY3VyclJvd1N0YXJ0ID0gc3ByaXRlUm93cyAtIE1hdGguZmxvb3IoKGN1cnJlbnRTcHJpdGVDZWxsLTEpL3Nwcml0ZUNvbHMpIC0gaDFGYWM7XG4gICAgICBsZXQgY3VyckNvbFN0YXJ0ID0gKChjdXJyZW50U3ByaXRlQ2VsbC0xKSAlIHNwcml0ZUNvbHMpO1xuICBcbiAgICAgIGNvbnN0IEEgPSAoY3VyckNvbFN0YXJ0KSAqIChjb2xGYWN0b3IpO1xuICAgICAgY29uc3QgQiA9IChjdXJyQ29sU3RhcnQrMSkgKiAoY29sRmFjdG9yKTtcbiAgICAgIGNvbnN0IEMgPSAoY3VyclJvd1N0YXJ0LTEpICogKHJvd0ZhY3RvcikgKyBoMkZhYypyb3dGYWN0b3I7XG4gICAgICBjb25zdCBEID0gKGN1cnJSb3dTdGFydCkgKiAocm93RmFjdG9yKSA7XG4gIFxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgMCwwLDAsMCwwLDAsMCwwLFxuICBcbiAgICAgICAgQiwgLy9iXG4gICAgICAgIEMsIC8vY1xuICAgICAgICBBLCAvL2FcbiAgICAgICAgQywgLy9jXG4gIFxuICAgICAgICBBLCAvL2FcbiAgICAgICAgRCwgLy9kXG4gICAgICAgIEIsIC8vYiBcbiAgICAgICAgRCwgLy9kXG4gICAgICBdO1xuICAgIH1cbn0iLCJleHBvcnQgY29uc3QgY3JlYXRlTW91dGggPSAoYm94dGVyLCB2YXJpYXRpb25JbmRleCwgY29sb3IsIHRleHR1cmUpID0+IHtcblxuICAgIGNvbnN0IGV5ZXMgPSBuZXcgRW50aXR5KCk7XG4gICAgZXllcy5zZXRQYXJlbnQoYm94dGVyKTtcbiAgICBjb25zdCBtYXQgPSBuZXcgTWF0ZXJpYWwoKTtcbiAgICBjb25zdCBleWVTaGFwZSA9IG5ldyBQbGFuZVNoYXBlKCk7XG4gICAgZXllU2hhcGUud2l0aENvbGxpc2lvbnMgPSBmYWxzZTtcblxuICAgIGV5ZVNoYXBlLnV2cyA9IGdldFV2cyh2YXJpYXRpb25JbmRleCsxKTtcbiAgIFxuICAgIGV5ZXMuYWRkQ29tcG9uZW50KGV5ZVNoYXBlKTtcbiAgICBjb25zdCBFWUVfSEVJR0hUID0gNzgvMjU2O1xuICAgIGNvbnN0IE1PVVRIX0hFSUdIVCA9IDExNC8yNTY7XG4gICAgY29uc3QgRVlFQlJPV05fSEVJR0hUID0gMzIvMjU2O1xuICAgIGNvbnN0IE5FQ0tfSEVJR0hUID0gMzIvMjU2O1xuXG4gICAgZXllcy5hZGRDb21wb25lbnQobmV3IFRyYW5zZm9ybSh7XG4gICAgICBwb3NpdGlvbjpuZXcgVmVjdG9yMygwLC0oKDEvMykvMiksLTAuNTAwMSksIFxuICAgICAgc2NhbGU6bmV3IFZlY3RvcjMoMS0wLjA1LDIvMy0wLjA1LCAxKVxuICAgIH0pKTtcbiAgIC8vIG1hdC5hbGJlZG9Db2xvciA9IENvbG9yMy5ZZWxsb3coKTtcbiAgICBtYXQuc3BlY3VsYXJJbnRlbnNpdHkgPSAwO1xuICAgIG1hdC5yb3VnaG5lc3MgPSAxO1xuICAgIG1hdC5hbGJlZG9UZXh0dXJlID0gdGV4dHVyZTtcbiAgICBtYXQuYWxwaGFUZXh0dXJlID0gdGV4dHVyZTtcbiAgICBtYXQuZW1pc3NpdmVUZXh0dXJlID0gdGV4dHVyZTtcbiAgICBtYXQuZW1pc3NpdmVJbnRlbnNpdHkgPSAxLjI7XG4gICAgbWF0LmVtaXNzaXZlQ29sb3IgPSBuZXcgQ29sb3IzKDEsMSwxKTsgXG5cbiAgICBleWVzLmFkZENvbXBvbmVudChtYXQpO1xuICAgIHJldHVybiB7XG4gICAgICBhcHBseUluZGV4Oih2YXJpYXRpb25JbmRleCk9PntcbiAgICAgICAgZXllU2hhcGUudXZzID0gZ2V0VXZzKHZhcmlhdGlvbkluZGV4KzEpXG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFV2cyh2YXJpYXRpb25JbmRleCl7XG4gICAgICBsZXQgc3ByaXRlQ29scyA9IDggICAvLyBudW1iZXIgb2YgY29sdW1uc1xuICAgICAgbGV0IHNwcml0ZVJvd3MgPSA4ICAgLy8gbnVtYmVyIG9mIHJvd3NcbiAgICAgIGxldCBjdXJyZW50U3ByaXRlQ2VsbCA9IHZhcmlhdGlvbkluZGV4OyAgIC8vIHN0YXJ0aW5nIHBvc2l0aW9uXG4gIFxuICAgICAgLy8gQ2FsY3VsYXRlZCB2YXJpYWJsZXNcbiAgICAgIGxldCBoMkZhYyA9IDYzLzEyODtcbiAgICAgIGxldCBoMUZhYyA9IDU1LzEyODtcbiAgICAgIGxldCBzcHJpdGVDZWxzID0gc3ByaXRlQ29scyAqIHNwcml0ZVJvd3M7XG4gICAgICBsZXQgY29sRmFjdG9yID0gMS9zcHJpdGVDb2xzO1xuICAgICAgbGV0IHJvd0ZhY3RvciA9IDEvc3ByaXRlUm93cztcbiAgICAgIGxldCBjdXJyUm93U3RhcnQgPSBzcHJpdGVSb3dzIC0gTWF0aC5mbG9vcigoY3VycmVudFNwcml0ZUNlbGwtMSkvc3ByaXRlQ29scykgLSBoMUZhYztcbiAgICAgIGxldCBjdXJyQ29sU3RhcnQgPSAoKGN1cnJlbnRTcHJpdGVDZWxsLTEpICUgc3ByaXRlQ29scyk7XG4gIFxuICAgICAgY29uc3QgQSA9IChjdXJyQ29sU3RhcnQpICogKGNvbEZhY3Rvcik7XG4gICAgICBjb25zdCBCID0gKGN1cnJDb2xTdGFydCsxKSAqIChjb2xGYWN0b3IpO1xuICAgICAgY29uc3QgQyA9IChjdXJyUm93U3RhcnQtMSkgKiAocm93RmFjdG9yKSArIGgyRmFjKnJvd0ZhY3RvcjtcbiAgICAgIGNvbnN0IEQgPSAoY3VyclJvd1N0YXJ0KSAqIChyb3dGYWN0b3IpIDtcbiAgXG4gICAgICByZXR1cm4gW1xuICAgICAgICAwLDAsMCwwLDAsMCwwLDAsXG4gIFxuICAgICAgICBCLCAvL2JcbiAgICAgICAgQywgLy9jXG4gICAgICAgIEEsIC8vYVxuICAgICAgICBDLCAvL2NcbiAgXG4gICAgICAgIEEsIC8vYVxuICAgICAgICBELCAvL2RcbiAgICAgICAgQiwgLy9iIFxuICAgICAgICBELCAvL2RcbiAgICAgIF07XG4gICAgfVxufSIsIlxuZXhwb3J0IGNvbnN0IGNyZWF0ZUhlYWQgPSAoYm94dGVyLCBpbmRleCkgPT4ge1xuXG4gICAgY29uc3Qgc2hhcGUgPSBpbmRleCAmJiBuZXcgR0xURlNoYXBlKGBtb2RlbHMvYWNjZXNvcmllcy9hY2Mke2luZGV4fS5nbGJgKTtcbiAgICBjb25zdCBoZWFkID0gbmV3IEVudGl0eSgpO1xuICAgIGhlYWQuYWRkQ29tcG9uZW50KG5ldyBUcmFuc2Zvcm0oe3Bvc2l0aW9uOm5ldyBWZWN0b3IzKDAsMCwwKX0pKVxuICAgIGlmKGluZGV4KSBoZWFkLmFkZENvbXBvbmVudChzaGFwZSk7XG4gICAgaGVhZC5zZXRQYXJlbnQoYm94dGVyKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFwcGx5SW5kZXg6KGluZGV4KT0+e1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJoZWFkIG9uZGV4XCIsIGluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlID0gbmV3IEdMVEZTaGFwZShgbW9kZWxzL2FjY2Vzb3JpZXMvYWNjJHtpbmRleH0uZ2xiYCk7XG4gICAgICAgICAgICBoZWFkLmFkZENvbXBvbmVudE9yUmVwbGFjZShzaGFwZSk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiZXhwb3J0IGNvbnN0IHByb3BlcnR5U2l6ZXMgPSBbNjQsIDY0LCA3LCA5XTtcbmV4cG9ydCBjb25zdCBwcm9wZXJ0aWVzICA9IFtcbiAgICBcImV5ZVwiLCBcIm1vdXRoXCIsIFwiZXllX2NvbG9yXCIsIFwiaGVhZFwiXG5dO1xuXG5cbmV4cG9ydCBlbnVtIENPTE9SIHtcbiAgICBSRUQsICAgIFxuICAgIFBJTkssXG4gICAgWUVMTE9XLFxuICAgIFdISVRFLFxuICAgIEdSRUVOLFxuICAgIFRVUlFVT0lTRSxcbiAgICBCTFVFXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlKGRuYSwgcHJvcGVydHlTaXplcyl7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIFxuICAgIGxldCBpID0gMDtcbiAgICBsZXQgZmFjdG9yID0gMTtcbiAgICB3aGlsZShpIDwgcHJvcGVydHlTaXplcy5sZW5ndGgpe1xuICAgICAgICByZXN1bHRzLnB1c2goIE1hdGguZmxvb3IoZG5hL2ZhY3RvciklcHJvcGVydHlTaXplc1tpXSApO1xuICAgICAgICBmYWN0b3IgPSBmYWN0b3IgKiBwcm9wZXJ0eVNpemVzW2ldO1xuXG4gICAgICAgIGkrKztcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1heGltdW1OdW1iZXIocHJvcGVydHlTaXplcyl7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBmYWN0b3IgPSAxO1xuICAgIHdoaWxlKGkgPCBwcm9wZXJ0eVNpemVzLmxlbmd0aCl7ICAgICAgICBcbiAgICAgICAgZmFjdG9yICo9IHByb3BlcnR5U2l6ZXNbaV07XG4gICAgICAgIGkrK1xuICAgIH1cbiAgICByZXR1cm4gZmFjdG9yLTE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREbmEoe2V5ZUluZGV4LCBtb3V0aEluZGV4LCBleWVDb2xvckluZGV4LCBoZWFkSW5kZXh9KXtcbiAgICByZXR1cm4gZW5jb2RlKHByb3BlcnR5U2l6ZXMsIFtleWVJbmRleCwgbW91dGhJbmRleCwgZXllQ29sb3JJbmRleCwgaGVhZEluZGV4XSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZShwcm9wZXJ0eVNpemVzLCBwcm9wZXJ0eVZhbHVlcyl7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBkbmEgPSAwO1xuICAgIGxldCBmYWN0b3IgPSAxO1xuICAgIHdoaWxlKGkgPCBwcm9wZXJ0eVNpemVzLmxlbmd0aCl7ICAgICAgICBcbiAgICAgICAgZG5hID0gZG5hICsgKCBwcm9wZXJ0eVZhbHVlc1tpXSAqIGZhY3RvciApO1xuICAgICAgICBmYWN0b3IgKj0gcHJvcGVydHlTaXplc1tpXTtcblxuICAgICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBkbmE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbmNvZGVyKHByb3BlcnRpZXMsIHByb3BlcnR5U2l6ZXMpe1xuICAgIHJldHVybiBmdW5jdGlvbihkbmEpe1xuICAgICAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKGRuYSwgcHJvcGVydHlTaXplcyk7XG4gICAgICAgIHJldHVybiBwcm9wZXJ0aWVzLnJlZHVjZSgoYWNjLCBjdXJyZW50LCBpbmRleCk9PntcbiAgICAgICAgICAgIGFjY1tjdXJyZW50XSA9IGRlY29kZWRbaW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSx7fSk7XG4gICAgfVxufVxuXG4vL1RPRE8gYWRkIG1ldGFkYXRhIiwiaW1wb3J0IHtjcmVhdGVFeWVzfSBmcm9tICcuL2V5ZXMnO1xuaW1wb3J0IHsgY3JlYXRlTW91dGggfSBmcm9tIFwiLi9tb3V0aFwiO1xuaW1wb3J0IHtjcmVhdGVIZWFkfSBmcm9tIFwiLi9oZWFkXCI7XG5pbXBvcnQge3Byb3BlcnR5U2l6ZXMsIGRlY29kZX0gZnJvbSAnLi4vbGliL2RlY29kZXInO1xuXG5jb25zdCBjb2xvcnMgPSBbXG4gICAgYCNmZjAwMDBgLFxuICAgIGAjZmYwMGZmYCwgXG4gICAgYCNmZmZmMDBgLFxuICAgIGAjZmZmZmZmYCxcbiAgICBgIzAwZmYwMGAsXG4gICAgYCMwMGZmZmZgLFxuICAgIGAjMDAwMGZmYCwgIFxuICBdO1xuXG5jb25zdCB0ZXh0dXJlID0gbmV3IFRleHR1cmUoYGltYWdlcy9zcHJpdGVzMjA0OC5wbmdgLCB7c2FtcGxpbmdNb2RlOjEsIGhhc0FscGhhOnRydWV9KTtcbmV4cG9ydCB0eXBlIFZveHRlckNyZWF0aW9uT3B0aW9ucyA9IHtcbiAgcG9zaXRpb246VmVjdG9yMyxcbiAgZG5hOm51bWJlcixcbiAgcm90YXRpb246UXVhdGVybmlvblxufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVZveHRlciA9ICh7cG9zaXRpb24sIGRuYSwgcm90YXRpb259OlZveHRlckNyZWF0aW9uT3B0aW9ucykgPT4geyAgIFxuICAgIGNvbnN0IFtleWVJbmRleCwgbW91dGhJbmRleCwgZXllQ29sb3JJbmRleCwgaGVhZEluZGV4XSA9IGRlY29kZShkbmEsIHByb3BlcnR5U2l6ZXMpO1xuICAgIGNvbnN0IGV5ZUNvbG9yID0gY29sb3JzW2V5ZUNvbG9ySW5kZXhdO1xuICAgIGNvbnN0IGVudGl0eSA9IG5ldyBFbnRpdHkoKTtcbiAgICBjb25zdCBza2luID0gbmV3IE1hdGVyaWFsKCk7XG4gICAgc2tpbi5hbGJlZG9Db2xvciA9IG5ldyBDb2xvcjMoMCwwLDApO1xuICAgIGNvbnN0IGJveHRlclNoYXBlID0gbmV3IEJveFNoYXBlKCk7XG4gICAgZW50aXR5LmFkZENvbXBvbmVudChib3h0ZXJTaGFwZSk7XG4gICAgZW50aXR5LmFkZENvbXBvbmVudChza2luKTsgIFxuICAgIFxuICAgIGNvbnN0IGJveHRlclRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oe1xuICAgICAgcG9zaXRpb24sXG4gICAgICBzY2FsZTpuZXcgVmVjdG9yMygxLDEsMSksXG4gICAgICByb3RhdGlvbjpyb3RhdGlvbnx8UXVhdGVybmlvbi5aZXJvKClcbiAgICB9KTtcbiAgICBlbnRpdHkuYWRkQ29tcG9uZW50KGJveHRlclRyYW5zZm9ybSk7XG4gICAgXG4gICAgY29uc3QgZXllcyA9IGNyZWF0ZUV5ZXMoZW50aXR5LCBleWVJbmRleCwgZXllQ29sb3IsIHRleHR1cmUpO1xuICAgIGNvbnN0IG1vdXRoID0gY3JlYXRlTW91dGgoZW50aXR5LCBtb3V0aEluZGV4LCBgI2ZmMDBmZmAsIHRleHR1cmUpO1xuICAgIGNvbnN0IGhlYWQgPSBjcmVhdGVIZWFkKGVudGl0eSwgaGVhZEluZGV4KTsgICAgXG4gICAgXG4gICAgcmV0dXJuIHsgICAgICBcbiAgICAgIGFwcGx5RG5hOihkbmE6bnVtYmVyKT0+e1xuICAgICAgICBjb25zdCBbZXllSW5kZXgsIG1vdXRoSW5kZXgsIGNvbG9ySW5kZXgsIGhlYWRJbmRleF0gPSBkZWNvZGUoZG5hLCBwcm9wZXJ0eVNpemVzKTtcblxuICAgICAgICBleWVzLmFwcGx5SW5kZXgoZXllSW5kZXgpO1xuICAgICAgICBleWVzLmFwcGx5Q29sb3IoY29sb3JzW2NvbG9ySW5kZXhdKTtcbiAgICAgICAgbW91dGguYXBwbHlJbmRleChtb3V0aEluZGV4KTsgICAgIFxuICAgICAgICBoZWFkLmFwcGx5SW5kZXgoaGVhZEluZGV4KTtcbiAgICAgIH0sXG4gICAgICBnZXRFbnRpdHk6KCk9PmVudGl0eSxcbiAgICAgIHNldFBhcmVudDoocGFyZW50OkVudGl0eSk9PmVudGl0eS5zZXRQYXJlbnQocGFyZW50KVxuICAgIH07XG4gIH07XG4iLCJpbXBvcnQge2NyZWF0ZVZveHRlcn0gZnJvbSBcIi4uLy4uL2NvbW1vbi92b3h0ZXIvdm94dGVyXCI7XG5cbmNvbnN0IHJvb3QgPSBuZXcgRW50aXR5KCk7XG5lbmdpbmUuYWRkRW50aXR5KHJvb3QpO1xuXG5jb25zdCB2b3h0ZXIgPSBjcmVhdGVWb3h0ZXIoe1xuICBwb3NpdGlvbjpuZXcgVmVjdG9yMyg4LDEsOCksXG4gIHJvdGF0aW9uOlF1YXRlcm5pb24uWmVybygpLFxuICBkbmE6MFxufSk7XG52b3h0ZXIuYXBwbHlEbmEoMSk7XG52b3h0ZXIuc2V0UGFyZW50KHJvb3QpOyJdfQ==\n//# sourceURL=dcl://src/game.ts")